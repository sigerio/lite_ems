# 变更：补充EMS系统设计文档

## 为什么
现有 `illustrate/` 文档定义了系统架构和各模块功能，但缺少关键的实现细节，
包括终端通讯协议、设备地址分配、数据存储方案等，这些缺失会阻碍后续开发工作。

## 变更内容
补充以下文档内容：

### 关键缺失（必须补充）
- **终端通讯协议**：定义WiFi JSON消息格式、消息类型、请求/响应结构
- **设备地址分配**：定义多设备场景下的地址分配规则（最大5设备）
- **数据存储方案**：定义日志、配置、历史数据的存储方式

### 建议补充（推荐完善）
- **系统启动流程**：EMS主控完整启动时序和初始化步骤
- **配置文件格式**：完整的JSON配置schema定义
- **错误码定义**：统一的系统级错误码表

## 影响
- 受影响的规格：docs（新建）
- 受影响的代码：无（纯文档补充）
- 受影响的文档：`illustrate/` 目录下新增文档

## 技术背景
- EMS主控：RK3566 (立创泰山派)，Linux系统，C语言
- 子模块：STM32，嵌入式C
- 终端：PC端应用
- 构建系统：CMake
- 通讯：termios (串口) + socket (TCP/IP)
- 设备规模：单设备场景，预留最大5设备扩展接口
